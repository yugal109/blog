{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- mobile metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1" />
    <!-- site metas -->

    {% block title %} {% endblock %}

    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <!-- bootstrap css -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" />

    <!-- <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    /> -->
    <!-- MATERIALIZE CSS -->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    
    <!-- style css -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
    <!-- Responsive-->
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}" />
    <!-- fevicon -->
    <link rel="icon" href="images/fevicon.png" type="image/gif" />
    <!-- Scrollbar Custom CSS -->
    <link
      rel="stylesheet"
      href="{% static 'css/jquery.mCustomScrollbar.min.css' %}"
    />
    <script src="//cdn.ckeditor.com/4.14.1/standard/ckeditor.js"></script>

    {% block css %} {% endblock %}
  </head>
  <body class="main-layout">
    <!-- <input type="text" id="textid"/>
    <button id="but">Send</button> -->


    <header style="position: fixed; width: 100%; z-index: 100">
      <!-- header inner -->
      <div class="container-fluid">
        <div class="row" style="display: flex;justify-content: flex-end;align-items: center;">
 
          <div class="col-lg-9">
            <div class="menu-area">
              <div  class="limit-box">
                <nav  class="main-menu">
              
                  <ul  class="menu-area-main">
                   
                    
                    <li>
                      <a href="{% url 'home' %}">
                        <i
                          style="font-size: 2.3rem"
                          class="large material-icons"
                          >home</i
                        >
                      </a>
                    </li>
                    {% if user.is_authenticated%}

                    <li>
                      <a href="{% url 'createblog' %}">
                        <i
                          style="font-size: 2.3rem"
                          class="large material-icons"
                          >queue</i
                        >
                      </a>
                    </li>
  
                    <li>
                      <a href="{% url 'inbox' %}">
                        <i
                          style="font-size: 2.3rem"
                          class="large material-icons"
                          >chat</i
                        >
                      </a>
                    </li>

                    <li>
                      <ul>
                        <div style="height:500px;overflow-y: scroll;">
                       <ul style="width: 100%;display:none" class="list-group" id="dropdown2" >

                        </ul>
                      </div>    
                        </ul>
                        <div style="display:flex;">

                      <!-- <a href="{% url 'notifications' %}"> -->

                        <div  id="noti_id"  style="display: flex">
                          <i
                            style="font-size: 2.3rem;color: white;";
                            class="large material-icons"
                            >notifications</i
                          >
                          <div
                            style="
                              margin-left: -15px;
                              border-radius: 50%;
                              font-size: 15px;
                              width: 20px;
                              height: 20px;
                              background-color: rgb(54, 190, 190);
                            "
                          >
                            <span style="color: white;margin-top: -10px;" id="notifications_length"
                              >0</span
                            >
                          </div>
                        </div>
                    </div>
                    </li>
                 
                    <li>
                    <li>
                      <a href="{% url 'followrequests' %}">
                        <div style="display: flex">
                          <i
                            style="font-size: 2.3rem"
                            class="large material-icons"
                            >group_add</i
                          >
                          <div
                            style="
                              margin-left: -15px;
                              border-radius: 50%;
                              font-size: 15px;
                              width: 20px;
                              height: 20px;
                              background-color: rgb(54, 190, 190);
                            "
                          >
                            <span style="color: white" id="followrequest_length"
                              >0</span
                            >
                          </div>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a href="{% url 'logout' %}">
                        <i
                          style="font-size: 2.3rem"
                          class="large material-icons"
                          >input</i
                        >
                      </a>
                    </li>
                    <!-- <li>
                      

                      <a id="imageurl" href="{% url 'profile' id=user.id %}">
                        
                       
                      </a>
                      
                    </li> -->

                    <!-- <li>
                   <a href="{% url 'search' %}">
                    <i
                    style="font-size: 2.3rem"
                    class="large material-icons"
                    >search</i
                  >
               
                   </a>
                       
                    </li> -->

                    <li >
                      <div style="display: flex;">
                        <!-- <i
                            style="font-size: 2.3rem;color: white;"
                            class="large material-icons"
                            >search</i
                          > -->
                        <input id="search_user" style="padding:5px" type="text" placeholder="Search"/>

                       
                      </div>
                      <ul class="list-group" id="search_list" style="width:19.9%;margin:0px">
                      
                      </ul>
                      
                    </li>

                    
                    {% else %}
                    <li>
                      <a href="{% url 'login' %}">
                        <i
                          style="font-size: 2.3rem"
                          class="large material-icons"
                          >trending_flat</i
                        >
                      </a>
                    </li>
                    <li>
                      <a href="{% url 'register' %}">
                        <i
                          style="font-size: 2.3rem"
                          class="large material-icons"
                          >person_add</i
                        >
                      </a>
                    </li>

                    {% endif %}
                    <!-- <a href="#"><img src="/media/images/search_icon.png" alt="#" /></a> -->
                  </ul>
                </nav>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- end header inner -->
    </header>

    {% block content %} {% endblock %} {%include 'blogapp/footer.html' %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

   
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script>

      let search=document.getElementById("search_user")
      search.addEventListener('input',()=>{

        document.getElementById("search_list")
        .innerHTML=""
      if(search.value.length!=0){
        axios.post("http://localhost:8000/blog/searchAPI/",{
          "username":search.value
        })
        .then((response)=>{
          const results=response.data.results
          if(results.length==0){
            

            document.getElementById("search_list")
          .innerHTML+=`
          <li style="padding:10px">
              No user found!
            </li>

          `

          }else{
          for(let i=0;i<results.length;i++){
        

            document.getElementById("search_list")
          .innerHTML+=`
          <li class="list-group-item" style="padding:4px;margin:0px">
            <a  href="/blog/profile/${results[i][2]}">
            <img
                          style="
                            vertical-align: middle;
                            width: 20px;
                            height: 20px;
                            border-radius: 50%;
                          "
                          src=${results[i][1]}
                          alt="A"
                        />
                      
            ${results[i][0]}

            </a>
            </li>

          `

          }
        }
          
        })
        .catch((error)=>{
          console.log(error)
        })
        
      }
      })



      </script>

    <script type="text/javascript" src="{% static 'js/base.js' %}"></script>


    {% block js %} {% endblock %}
  </body>
</html>
